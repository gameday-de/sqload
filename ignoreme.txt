package main

import (
	"fmt"
)

type Queries struct {
	FindAllUsers       string `query:"find_all_users"`
	FindUserByUsername string `query:"find_user_by_username"`
	FindUserById       string `query:"find_user_by_id"`
	GetCourses         string `query:"get_courses"`
}

func main() {

	// data, err := os.ReadFile("/home/yoryo/projects/loadquery/common_queries.sql")
	// if err != nil {
	// 	fmt.Printf("Error reading file: %s\n", err)
	// }
	// fmt.Println(string(data))

	queries := Queries{}
	err := FromFile("/home/yoryo/projects/loadquery/common_queries.sql", &queries)
	if err != nil {
		fmt.Printf("error loading queries: %s", err)
	}
	fmt.Println(queries.FindAllUsers, "\n\n")
	fmt.Println(queries.FindUserByUsername, "\n\n")
	fmt.Println(queries.FindUserById, "\n\n")

	// sql := `
	// -- name: find_all_users
	// -- Find all users
	// SELECT *
	//   FROM uuser;

	// -- name: find_user_by_username
	// -- Find a user with the given username field
	// SELECT *
	//   FROM uuser
	//  WHERE username = %(username)s;

	// -- name: find_user_by_id
	// -- Find a user with the given uuser_id
	// SELECT *
	//   FROM uuser
	//  WHERE uuser_id = %(uuser_id)s;

	// -- name: get_courses
	//   SELECT unitid,
	// 		 year,
	// 		 semester,
	// 		 unitcode,
	// 		 descr,
	// 		 estenrol,
	// 		 homepage,
	// 		 area,
	// 		 start_date
	// 	FROM unit_view
	// ORDER BY year, semester, unitcode
	//    LIMIT %(limit)s
	//   OFFSET %(offset)s;
	// `
	// fmt.Println("USING STRING")
	// err = FromString(sql, &queries)
	// if err != nil {
	// 	fmt.Printf("error loading queries: %s", err)
	// }
	// fmt.Printf(queries.FindUserByUsername, "\n\n")
	// fmt.Printf(queries.FindUserById, "\n\n")
}
